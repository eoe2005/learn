# 字段

## 字段命名

1. 简短
2. 见名知意

## 字段备注

1. 状态字段一定要描述状态含义

## 字段类型

1. TINYINT
2. INT
3. TIMESTAMP
4. DATETIME
5. CHAR
6. VARCHAR
7. TEXT
8. EMUN

## 常用字段

1. create_at
2. create_ip
3. update_at
4. update_ip
5. uid
6. status （状态变更的时间字段等）

# 索引

## 原则

1. 系统场景分析 ，读，写 侧重
2. 避免连表
3. 查询最多的语句
4. 离散读高的

## 评估索引

```=sql
SELECT COUNT( DISTINCT 目标字段)/COUNT(*) FROM TABLENAME > 0.75 可以建立
```

## 聚合索引

1. 最好不要使用 唯一索引 作为主键
2. 每次字段最好不要超过4个
3. 尽量使用 int或者日期 作为索引

# 分表

## 分表意义

1. 提高性能
2. 降低网络开销
3. 扩展

## 分表原则

1. 数据量巨大
2. 字段太多
3. 字段内容巨大

## 水平分表

1. id取模
2. id 按区间
3. 按照时间

## 垂直分表

1. 主键唯一
2. text 内容单方
3. 超多字段按照属性拆分（用户：基本信息表，用户状态信息表，用户财富信息，用户社交属性信息）

## 复杂性

### 交叉订单系统

1. 滴滴平台订单
2. 淘宝平台订单

### 列表查询

1. 最近用户7天活跃
2. 月新增用户
3. 评论系统用户基础信息获取

# 大表

## 添加字段

1. 创建新表
2. 旧表创建触发器向新表同步
3. 旧表数据插入到新表
4. 重命名旧表
5. 新表重命名成旧表名字
